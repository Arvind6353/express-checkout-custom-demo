<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Express Checkout Rest Integration Presentation</title>
		<link rel="icon" sizes="32x32" href="https://www.paypalobjects.com/webstatic/developer/favicons/pp32.png">
		
		<meta name="description" content="Express Checkout Rest Integration Presentation">
		<meta name="author" content="Arvindan TA">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

        <style>
            .smallfont {
                    font-size: 30px !important;
                }
                i {
                    font-weight : 800 !important;
                    text-decoration: underline;
				}
			/*	.reveal .slides > section.present, .reveal .slides > section > section.present {
					min-height: 100% !important;
					display: flex !important;
					flex-direction: column !important;
					justify-content: center !important;
					position: absolute !important;
					top: 0 !important;
				  }
				  section > h3 {
					position: absolute !important;
					top: 0 !important;
					margin-left: auto !important;
					margin-right: auto !important;
					left: 0 !important;
					right: 0 !important;
				  }
				  
				  .print-pdf .reveal .slides > section.present, .print-pdf .reveal .slides > section > section.present {
					min-height: 770px !important;
					position: relative !important;
				  }
				  */
        </style>
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	<style>
			.dx-bg-grad-radial-blue {
				background: radial-gradient(circle at 0 0,#009cde,#003087);
			}
			.dx-roundel {
				-webkit-align-items: center;
				-ms-flex-align: center;
				align-items: center;
				border: 1px solid #1e2021;
				border-radius: 50%;
				display: -webkit-flex;
				display: -ms-flexbox;
				display: flex;
				-webkit-flex-grow: initial;
				-ms-flex-positive: initial;
				flex-grow: initial;
				font-size: 1.375rem;
				font-weight: 400;
				height: 3.5rem;
				-webkit-justify-content: center;
				-ms-flex-pack: center;
				justify-content: center;
				margin-bottom: 1.25rem;
				text-transform: uppercase;
				width: 3.5rem;
			}

			.dx-bg-grad-radial-blue, .dx-bg-grad-radial-gray, .dx-bg-grad-radial-green, .dx-bg-grad-radial-orange, .dx-bg-grad-radial-pink, .dx-bg-grad-radial-purple {
				border-color: transparent;
				color: #fff;
			}
	</style>

	<style type="text/css">
		/* 1. Style header/footer <div> so they are positioned as desired. */
		#header-left {
			position: absolute;
			top: 0%;
			left: 0%;
		}
		#header-right {
			position: absolute;
			top: 0%;
			right: 0%;
		}
		#footer-left {
			position: absolute;
			bottom: 0%;
			left: 0%;
		}
	</style>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	
	</head>

	<body>

			<div id="hidden" style="display:none;">
					<div id="header">
						<div id="header-left"><span class="dx-roundel dx-bg-grad-radial-blue">EC</span></div>
						<div id="header-right">
							<img src="https://www.paypalobjects.com/webstatic/mktg/Logo/pp-logo-200px.png" border="0" alt="PayPal Logo">
						</div>
						<div id="footer-left">
							<a href="/">Demo Portal</a>
						</div>	
					</div>
				</div>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Express Checkout</h1>
							<center><span class="dx-roundel dx-bg-grad-radial-blue">EC</span></center></br>
					<h3>Rest Integration Demo Portal - <a href="/">Here</a></h3>
					<p>
						<small>Created by <a href="#">Arvindan</a></small>
					</p>
				</section>

				<section>
					<h3>Hello There :)</h3>
					<p>
						This portal contains various types of Express Checkout JsV4 Rest Integration methods 
					</p>
				</section>

				<!-- Example of nested vertical slides -->
				<section>
					<section>
						<h2>What is Express Checkout</h2>
						<p>Express Checkout gives your buyers a simplified checkout experience that keeps them local to your website or mobile app throughout the payment authorization process and lets them use their PayPal balance, bank account, or credit card to pay without sharing or entering any sensitive information on your site.</p>
					
						<a href="#" class="navigate-down">
							<img width="100" height="100" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section>
						<h2>Working of Express Checkout</h2>
                        <img height="287" data-src="../../images/in-context-flow.png" alt="Express checkout working">
                        
                     </section>
                     <section>
                         <h3>Steps</h3>
                        <ol style="margin-left:10%;line-height:1em;list-style-type:decimal">
                            <li>When a buyer clicks the PayPal button, your app sets up the payment option and begins the checkout in a lightbox
                                or mobile browser.</li>
                            <br/><li>The buyer logs in to PayPal. Your app can optionally show payment details on a confirmation page.</li>
                           <br/> <li>The buyer reviews and authorizes the payment.</li>
                            <br/><li>Your app returns control to the parent window or mobile app to finalize the payment.</li>
                        </ol>
                     </section>
		
                </section>
                

                <section>
                    <h3>Customize experience via Smart payment buttons</h3>
                    <p>
                        Express Checkout's Smart Payment Buttons provide a variety of button customization options, such as color, language, shape, and multiple button layout.</p>
                    <p> With multiple button layout, you can offer buyers local funding sources or alternative payment methods, such as Venmo.</p>
                   
                </section>


				<section>

					<h3> Express checkout flows </h3>
					<p> There are two flows in the express checkout</p>
					<ol style="float:left;margin-left:15% !important;">
						<li> Shortcut flow</li>
						<li> Mark flow</li>
					</ol>

				</section>


				<section>
					<h3> Shortcut Flow</h3>
					<section>
						<ul class="smallfont">
							<li> Add a PayPal checkout button on your shopping cart page. A buyer clicks the button to initiate the Express Checkout flow.</li>
						<br/><li> This payment flow is the fastest because buyers skip the pages on your website that gather shipping and payment details.</li>
						<br/><li> Instead, the buyer is redirected to PayPal from the shopping cart page.</li>
						<br/><li> There is no need to collect the buyer's shipping information. PayPal can supply you with the buyer's shipping information, so there is no need to collect it.</li>
						</ul>		
					</section>
					
					<section>
					
						<img style="height:10em !important"  data-src="../../images/shortcut-flow.png" alt="Shortcut flow">
							
					</section>
				
				</section>


				<section>
					<h3> Mark Flow</h3>
					<section>
						<ul class="smallfont">
							<li> On your payment methods page, add the PayPal mark as one of the payment options, and set PayPal as the default option.</li>
						<br/><li>In this flow, buyers initiate the Express Checkout flow from your payment methods page.</li>
						<br/><li> Here buyer is shown the shipping and billing details page before proceeding to payment methods page.</li>
				        <br/> <li> After entering those details , the buyer is taken to payment methods page and once the paypal is selected the checkout process begin</li>			
						</ul>		
					</section>
					
					<section>
					
						<img style="height:10em !important"  data-src="../../images/mark-flow.png" alt="Mark flow">
							
					</section>
					
				</section>
	


                <section>
                    
                    <h3> Steps to integrate Express checkout</h3>
                    <ol>
                        <li class='fragment'> Add PayPal Button </li>
                        <li class='fragment'> Create Rest App and Credentials </li>
                        <li class='fragment'> Create Payment </li>
                        <li class='fragment'> Execute Payment </li>
                    </ol>   
                
                </section>

                <section> <!-- Add Payment Button -->
                    <section>
                        <h3> Add Paypal Button </h3>
                        <p> Paypal provides the checkout.js script .<p>
                        <p> Add this to your client to render the paypal button on the web page.</p>
                    </section>
                    
                    <section>
                            <h4>Basic Template</h4>
                            <pre><code style="height:100%" data-trim contenteditable>
                                
<!-- Import the checkout js here -->

<div id="paypal-button"></div>

<body>
  <div id="paypal-button"></div>

  <script>
    paypal.Button.render({
      env: 'production', // Or 'sandbox',

      commit: true, // Show a 'Pay Now' button

      style: {
        color: 'gold',
        size: 'small'
      },

      payment: function(data, actions) {
        /* 
         * Set up the payment here 
         */
      },

      onAuthorize: function(data, actions) {
        /* 
         * Execute the payment here 
         */
      },

      onCancel: function(data, actions) {
        /* 
         * Buyer cancelled the payment 
         */
      },

      onError: function(err) {
        /* 
         * An error occurred during the transaction 
         */
      }
    }, '#paypal-button');
  </script>
</body>                            </code></pre>
                        </section>


    <section class="stack">

        <h3> Checkout Script Options </h3>

        <table>
            <thead>
                <tr>
                    <th>
                        Option
                    </th>
                    <th>
                        Description
                    </th>
                </tr>   
            </thead>
            <style>
                    tr td {
                        font-size: 30px !important;
                    }
                </style>
            <tbody>
                <tr>
                    <td>
                            #paypal-button
                    </td>
                    <td>
                            Selector that refers to the container element into which the PayPal button is rendered.                        
                    </td>
                </tr>
                <tr>    
                    <td>
                        style
                    </td>
                    <td>
                    Option that allows you to customize the button's appearance.
                    </td>
                </tr><tr>
                    <td>
                        payment()
                    </td>
                    <td>
                            Function called by checkout.js when a buyer clicks the PayPal button. 
                            
                            This is where you set up and return a payment to initiate the checkout process.
                    </td>
                </tr>
            </tbody>
        </table>
        </section>
          
        <section>
            
        <table>
                <thead>
                    <tr>
                        <th>
                            Option
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>   
                </thead>
                <tbody>
                    <tr>
                        <td>
                            onAuthorize()
                        </td>
                        <td>
                                This gets called after the buyer logs in and authorizes the payment on paypal.com. 
                                
                                You can optionally show a confirmation page, and then execute the payment.
                        </td>
                    </tr>
                        <tr>   
                        <td>
                            onCancel()
                        </td>
                        <td>
                            This gets called if the buyer cancels the payment.
                            
                            By default, the buyer is returned to the original page, but you're free to use this function to take them to a different page.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            onError()
                        </td>
                        <td>
                            Function called by checkout.js when an error occurs. 
                            
                            You can allow the buyer to re-try or show an error message.
                        </td>

                    </tr>
                    </tbody>
                </table>
             </section>    

        </section> <!-- End Of Add Payment -->    


        <section>
            <section>
            <h3> Create Rest App &amp; Credentials</h3>

            <p> As a prerequisite, you need a client ID and secret to authenticate your account with PayPal.
            </p>
             <p>You can use an existing client ID or create a new one.
            </p>
           </section>
            <section>
                <h4> Follow the below steps to create rest credentials</h4>
                <ol>
                    <li>
                            Navigate to My Apps &amp; Credentials and click Log into Dashboard in the top, right corner of the page.
                    </li>
                    <li>
                            Scroll down to REST API Apps and click the name of your app to see the app's details. If you don't have any apps, create one now
                    </li>
                    <li>
                         Click Create App.
                         In App Name, enter a name and then click Create App again. The app is created and your client ID is displayed.
                    </li>
                    <li>
                            Click the Sandbox / Live toggle to display and copy the client ID for each environment.
                    </li>

                </ol>
            </section>  
        </section>

                
        <section>

            <!-- <h3> Set up &amp; Execute the Payment</h3> -->
            <h3> We have the following 3 types of integrations</h3>
            <ul>
                <li class='fragment'> Client Integration</li>
                <li class='fragment'> Server Integration</li>
                <li class='fragment'> Braintree Integration</li>
            </ul>

        </section>


        <section >
             <section>
				<h3> Client Integration</h3>
				<p style="float:left;margin-left:4%;"><i> Characteristics </i></p>
                <ul>
                    <li> Simple to implement </li>
                   <br/> <li>
                        With this integration, the PayPal button calls the PayPal REST API directly to set up the payment
                    </li>
                    <br/><li>       
                        No server setup required.
                    </li>
                </ul>
            </section>
            <section>
				<h3> Client Integration</h3>
			    <p> Some of the most common types of Client integration:</p>
                <ol>
                    <li> Shortcut</li>
                    <li> Redirection </li>
                    <li> Customise Experience </li>
                    <li> Confirmation </li>
                    <li> Mark Flow (Can be used with other types)</li>
                </ol>
            </section>    
        </section>   


        <section> <!-- shortcut flow -->
            <h3> Shortcut flow Client Integration </h3>
            <section>
                <ul class="smallfont" style="line-height:1.5em;">
                    <li> This is the simplest of all checkout jsv4 integrations.</li>
                    <br/><li> User will be shown the paypal checkout button.</li>
                    <br/><li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
                    <br/><li> Call <mark>actions.payment.create()</mark> in the payment() method passing the payment information <i>(amount and currency are required fields) </i>to create a payment.
                    </ul>    
			</section>
			
			<section>
				<ul class="smallfont" style="line-height:1.5em;">
					<li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called.   </li> 
			   <br/><li> Call <mark>actions.payment.execute()</mark> in onAuthorize() to execute the payment.</li>
				<br/><li> Final payment object is returned in the execute() call and the result can be shown to the user.</li>
				</ul>
			</section>

            <section>
                    <img height="400" data-src="../../images/basic-client.gif" alt="Shortcut Client working flow">
                    
            </section>       
        </section>    <!-- end of basic client -->


        <section>
            <h3> Redirection flow Client Integration </h3>
            <section>
                <ul class="smallfont" style="line-height:1.5em;">
                    <li> We can redirect the user to a different page on cancelling the checkout flow or on success execution of the payment to show the payment details.</li>
                   <br/> <li> User will be shown the paypal checkout button.</li>
				   <br/>  <li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
                   <br/> <li> Call <mark>actions.payment.create()</mark> in the payment() method passing the payment information to create a payment.</li>
                    
                </ul>
            </section>         
				
			<section>
				<ul class="smallfont" style="line-height:1.5em;">
					<li> For redirection to happen , we need to pass 
<pre>
<code data-trim>
redirect_urls: {
	return_url: "/api/paymentDetails",
	cancel_url: "/api/cancel"
}    
</code>
</pre> along with the <i>amount and currency </i> </li>
						<br/> <li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called.    
				</ul>
			</section>				

            <section>
                <ul class="smallfont" style="line-height:1.5em;">
                  	<li> Call <mark>actions.payment.execute()</mark> in onAuthorize() to execute the payment.</li>
                   <br/> <li> Once the final payment object is returned , invoke <mark> actions.redirect()</mark> to redirect the user to the url specified in the <i>return url</i>.</li>
                    <br/> <li> If the user cancels the checkout flow , use <mark> actions.redirect() </mark> in the <i>onCancel()</i> option to redirect the user to the cancel page</li>    
                </ul>    
            </section>

            <section>
                <img height="400" data-src="../../images/redirection-client.gif" alt="Redirection Client working flow">
                    
            </section>       
        </section>    <!-- end of redirection client -->


        
        <section> <!-- experience client -->
                <h3> Customise Experience flow Client Integration </h3>
                <section>
                    <ul class="smallfont" style="line-height:1.5em;">
                        <li> We can customize the experience by passing extra options in <mark> actions.payment.create()</mark>.</li>
                     <br/>   <li> These options are based on the <mark> <a target="_blank" href="https://developer.paypal.com/docs/api/payment-experience/">Experience Api </a></mark>.</li>  
					 <br/> <li> User will be shown the paypal checkout button.</li>
					 <br/> <li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
					 <br/> <li> Call <mark>actions.payment.create()</mark> in the payment() method passing the payment information to create a payment.</li>
                         </ul>
                </section>         
					
				<section>
					<ul class="smallfont" style="line-height:1.5em;">
						<li> For customized experience , we need to pass  <mark>experience: {
								input_fields: {
									no_shipping: 1 // takes 0,1,2 as values
									// many more fields
								}
							}
							</mark>  along with the <i>amount and currency </i> </li>
					<br/>	<li> Here, <i>no_shipping : 1 </i> means shipping address will not be shown to the user during checkout flow.</li>  
					<br/>	<li> We can also show custom logo and brand names in the paypal page . To do this , we need to pass <mark> presentation {
								brand_name :"custom brand name"
								logo_image:"custom logo image_url"
								}
								</mark>  along with the <i>amount and currency </i>
						</li>
					</ul>
				</section>			

                <section>
                    <ul class="smallfont" style="line-height:1.5em;">
						<li> User will be shown the paypal login screen and once after successful auth the user <i>will not be able to see the shipping details</i> as we have disabled them using <i>no_shipping</i> and <mark>onAuthorize()</mark> method gets called.</li>
					<br/>	<li> Call <mark>actions.payment.execute()</mark> in onAuthorize() to execute the payment.</li>
					<br/>	<li> Final payment object is returned in the execute() call and this can be shown to the user.</li>    
                    </ul>    
                </section>
				
				<section>
	
					<p> Sample Experience payload section</p>	
<pre>
<code>
"flow_config": {
	"landing_page_type": "billing",
	"bank_txn_pending_url": "https://www.example.com"
},
"input_fields": {
	"no_shipping": 1,
	"address_override": 1
},
"presentation": {
	"logo_image": "https://www.example.com"
}
</code>
</pre>

				</section>
				<style>
						table.options tr td {
							font-size: 27px !important;
						}
					</style>
				<section class="stack">
					
					<br/> <p> Flow Config options</p>
						<table class="options">
							<thead>
								<tr>
									<th>Option</th>
									<th>Possible Values</th>
									</tr>
							</thead>
							<tbody>
								<tr>
									<td>landing_page_type </td>
									<td> <i>Billing</i> - For non-PayPal account landing page <br/>
										 <i>Login</i> - For PayPal account login landing page
									</td>
								</tr>

								<tr>
										<td>user_action </td>
										<td> <i>continue</i> - Use it when you <i>don't know</i> the final payment amount. Here customer can change the payment amount on clicking <i>continue</i> in the paypal page <br/>
											 <i>commit</i> - Use it when you <i>know</i> the final payment amount. On clicking </i>paynow</i> , payment is processed immediately
										</td>
									</tr>

							</tbody>
						</table>
				</section>

				<section class="stack">
						<br/> <p>Input Fields options</p>
							<table  class="options">
								<thead>
									<tr>
										<th>Option</th>
										<th>Possible Values</th>
										</tr>
								</thead>
								<tbody>
									<tr>
										<td>allow_note </td>
										<td> <i>Boolean value</i> - Indicates whether the customer can enter a note to the merchant on the PayPal page during checkout <br/>
										</td>
									</tr>
	
									<tr>
										<td>no_shipping  </td>
										<td> <i>0</i> - Displays the shipping address on the PayPal pages. <br/>
											<i>1</i> - Redacts shipping address fields from the PayPal pages <br/>
											<i>2</i> - Gets the shipping address from the customer's account profile
										</td>
									</tr>

									<tr>
										<td>address_override   </td>
										<td> <i>0</i>- Displays the shipping address on file. <br/>
											<i>1</i> -  Displays the shipping address specified in this call. the customer cannot edit this shipping address
										</td>
									</tr>

	
								</tbody>
							</table>
					</section>


					<section class="stack">
							<br/> <p>Presentation options</p>
								<table  class="options">
									<thead>
										<tr>
											<th>Option</th>
											<th>Possible Values</th>
											</tr>
									</thead>
									<tbody>
										<tr>
											<td>brand_name  </td>
											<td><i>27 single-byte alphanumeric characters.</i> A label that overrides the business name in the PayPal account on the PayPal pages </td>
										</tr>
		
										<tr>
											<td>logo_image   </td>
											<td> <i>A URL to the logo image.</i> A valid media type is .gif, .jpg, or .png. The image's maximum width is 190 pixels and maximum height is 60 pixels
											</td>
										</tr>
	
										<tr>
											<td>locale_code    </td>
											<td> The locale of pages that the PayPal payment experience displays. Example : <i>AU, AT, BE, US </i>	</td>
										</tr>
	
		
									</tbody>
								</table>
						</section>

				
                <section>
                    <img height="400" data-src="../../images/experience-client.gif" alt="Custom Experience Client working flow">
                        
                </section>       
            </section>    <!-- end of experience client -->

			<section> <!-- confirmation client -->
					<h3> Confirmation flow Client Integration </h3>
					<section>
						<ul class="smallfont" style="line-height:1.5em;">
								<li> Merchant will be shown a confirmation before executing the payment.</li>
						<br/>	<li> User will be shown the paypal checkout button.</li>
						<br/>	<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
						<br/>	<li> Call <mark>actions.payment.create()</mark> in the payment() method passing the payment information <i>(amount and currency are required fields) </i> and other fields as applicable to create a payment.</li>
							</ul>
						</section>
					
						<section>
							<ul class="smallfont" style="line-height:1.5em;">
								<li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called. </li>
							<br/><li> Call <mark> actions.payment.get()</mark> in onAuthorize() to get the payment details and show the <i>confirmation</i> block with complete the payment button </li>	
							<br/><li> On clicking complete the payment button , call <mark>actions.payment.execute()</mark> in onAuthorize() to execute the payment.</li>
							<br/><li> Final payment object is returned in the execute() call and the result can be shown to the user.</li>
							</ul>    
					   </section>
					<section>
							<img height="400" data-src="../../images/confirmation-client.gif" alt="Confirmation Client working flow">
					</section>       
			</section>    <!-- end of confirmation client -->

			<section> <!-- Mark Flow client -->
				<h3> Mark flow Client Integration </h3>
				<section>
					<ul class="smallfont" style="line-height:1.5em;">
						<li> This flow is longer when compared to Shortcut flow</li>
				<br/>	<li> Merchant selects the product and clicks on proceed to checkout button.</li>
				<br/>	<li> Merchant will be shown a shipping address form and merchant can enter them.</li> 
					</ul>
				</section>
				
				<section>
					<ul class="smallfont" style="line-height:1.5em;">
						<li> User will be shown the paypal checkout button and other payment options.</li>
					<br/>	<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
					<br/>	<li> Call <mark>actions.payment.create()</mark> in the payment() method passing the payment information <i>(amount and currency are required fields) </i> and other fields as applicable to create a payment.</li>
					</ul>
				</section>

				<section>
					<ul class="smallfont" style="line-height:1.5em;">
						<li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called.  </li>  
					<br/>	<li> Call <mark>actions.payment.execute()</mark> in onAuthorize() to execute the payment.</li>
					<br/>	<li> Final payment object is returned in the execute() call and the result can be shown to the user.</li>
					</ul>    
				</section>
				<section>
						<img height="400" data-src="../../images/markflow-client.gif" alt="Mark Flow Client working">
				</section>       
		</section>    <!-- end of mark flow client -->

		<!-- end of client intergration-->
		
		

	<!-- start of server integration -->

	<section>
			<h3> Server Integration</h3>
			<section>
					<p style="float:left;margin-left:4%"><i> Characteristics </i></p>
				<ul>
					<li> Requires Server application </li>
					<li> Use this integration for advanced apps that require more flexibility to manage payments.</li>
					<li> The PayPal button calls your server, and your server calls the PayPal REST API to set up the payment.</li>
					<li> Requires client Id and client secret of the REST App </li>
				</ul>
			</section>
			<section>
				<p> Some of the most common types of Server integration:</p>
				<ol>
					<li> Shortcut</li>
					<li> Redirection </li>
					<li> Customise Experience </li>
					<li> Confirmation </li>
					<li> Mark Flow (Can be used with other types)</li>
					<li> Full Page Redirection </li>
				</ol>
			</section>    
	</section>  

	<section> <!-- server shortcut flow -->
		<h3> Shortcut flow Server Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>paypal-rest-sdk node js</i> module.</li>
			<br/>	<li> User will be shown the paypal checkout button.</li>
			<br/>	<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
			<br/>	<li> Call <mark>paypal.request.post(CREATE_PAYMENT_URL)</mark>,passing the payment payload <i>(intent and payer are required fields) </i> which invokes the method on the server to create payment</li>
			<br/>	<li> The server api returns back the <mark>id</mark> to the client which returns the same in the payment() method</li>
				
			</ul>    
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called. </li>
			<br/><li> In the onAuthorize() method, call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.paymentID and data.payerID </i> </li>
			<br/><li> The server calls the payment api and execute the payment.</li>
			<br/><li> Final payment object is returned from the server and the result can be shown to the user.
			</ul>
		</section>

		<section>
			<br/>
			<p>Sample Payment Payload </p>
			<p>Read more about the payload options <a target="_blank" href="https://developer.paypal.com/docs/api/payments/?mark=payments/payment/#definition-payment"> here</a>
<pre><code data-trim >
{
"intent": "sale",
"payer": {
	"payment_method": "paypal"
	},
"transactions": [
	{
		"amount": {
		"total": "30.11",
		"currency": "USD",
		"details": {
		"subtotal": "30.00",
		"tax": "0.07",
		"shipping": "0.03",
		"handling_fee": "1.00",
		"shipping_discount": "-1.00",
		"insurance": "0.01"
		}
		},
		"description": "The payment transaction description.",
		"custom": "EBAY_EMS_90048630024435",
		"invoice_number": "48787589673",
		"payment_options": {
		"allowed_payment_method": "INSTANT_FUNDING_SOURCE"
		},
		"soft_descriptor": "ECHI5786786",
		"item_list": {
		"items": [
		{
		"name": "hat",
		"description": "Brown hat.",
		"quantity": "5",
		"price": "3",
		"tax": "0.01",
		"sku": "1",
		"currency": "USD"
		},
		{
		"name": "handbag",
		"description": "Black handbag.",
		"quantity": "1",
		"price": "15",
		"tax": "0.02",
		"sku": "product34",
		"currency": "USD"
		}
		],
		"shipping_address": {
		"recipient_name": "Brian Robinson",
		"line1": "4th Floor",
		"line2": "Unit #34",
		"city": "San Jose",
		"country_code": "US",
		"postal_code": "95131",
		"phone": "011862212345678",
		"state": "CA"
		}
		}
	}
],
"note_to_payer": "Contact us for any questions on your order.",
"redirect_urls": {
	"return_url": "https://www.example.com/return",
	"cancel_url": "https://www.example.com/cancel"
	}
}
</pre></code>
			</section>	

		<section>
				<img height="400" data-src="../../images/basic-server.gif" alt="Shortcut Server working flow">
				
		</section>       
    </section>    <!-- end of shortcut server  -->


	<section> <!-- redirection flow server -->
		<h3> Redirection flow Server Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>paypal-rest-sdk node js</i> module.</li>
			<br/><li> We can redirect the user to a different page on cancelling the checkout flow or on success execution of the payment to show the payment details.</li>
			<br/><li> User will be shown the paypal checkout button.</li>
			<br/><li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
				
			</ul>    
		</section>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Call <mark>paypal.request.post(CREATE_PAYMENT_URL)</mark>, passing the payment payload containing <i>(intent and payer are required fields) </i> and <mark>redirect_urls: {
						return_url: "/api/paymentDetails",
						cancel_url: "/api/cancel"
						}   </mark>   which invokes the method on the server to create payment</li>
			<br/><li> The server api returns back the <mark>id</mark> to the client which returns the same in the payment() method</li>
			<br/><li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called. </li>
			</ul>
		</section>	
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> In the onAuthorize() method, call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.paymentID and data.payerID </i> </li>
			<br/><li> The server calls the payment api and execute the payment.</li>
			<br/><li> Once the final payment object is returned , invoke <mark> actions.redirect()</mark> to redirect the user to the url specified in the <i>return url</i>.</li>
			<br/><li> If the user cancels the checkout flow , use <mark> actions.redirect() </mark> in the <i>onCancel()</i> option to redirect the user to the cancel page</li>    
			</ul>
		</section>

		<section>
			<img height="400" data-src="../../images/redirection-server.gif" alt="Redirection Flow Server working">
				
		</section>       
	</section>    <!-- end of redirection server -->


	
	<section> <!-- experience flow server -->
		<h3> Customise Experience flow Server Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> We can customize the experience by passing extra options in <mark> actions.payment.create()</mark>.</li>
			<br/>	<li> These options are based on the <mark> <a target="_blank" href="https://developer.paypal.com/docs/api/payment-experience/">Experience Api </a></mark>.  </li>
				<br/>	<li> User will be shown the paypal checkout button.</li>
				<br/>	<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
				<br/>	<li> Call <mark>paypal.request.post(CREATE_PAYMENT_URL)</mark>,passing the payment payload <i>(intent and payer are required fields) </i> which invokes the method on the server to create payment</li>
			</ul>
		</section>         
			
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> The server api returns back the <mark>id</mark> to the client which returns the same in the payment() method</li>
				<br/><li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called. </li>
				<br/><li> For customized experience , we need to pass <i>experience_profile_id</i>, which can be created using the steps specified <a target="_blank" href="https://developer.paypal.com/docs/api/payment-experience/#web-profiles_create">here</a>
				</li>
			</ul>
		</section>			

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> The custom brand name which is passed in the payload will be shown in the paypal page.</li>
		<br/>	<li> Call <mark>actions.payment.execute()</mark> in onAuthorize() to execute the payment.</li>
		<br/>   <li> Final payment object is returned in the execute() call and this can be shown to the user.</li>    
			</ul>    
		</section>
		
		<section>
			<img height="400" data-src="../../images/experience-server.gif" alt="Custom Experience Server working flow">
				
		</section>       
	</section>    <!-- end of experience server -->


	<section> <!-- confirmation server -->
		<h3> Confirmation flow Server Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>paypal-rest-sdk node js</i> module.</li>
		<br/>	<li> Merchant will be shown a confirmation block before executing the payment.</li>
		<br/>	<li> User will be shown the paypal checkout button.</li>
		<br/>	<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
		<br/>	<li> Call <mark>paypal.request.post(CREATE_PAYMENT_URL)</mark>,passing the payment payload <i>(intent and payer are required fields) </i> which invokes the method on the server to create payment</li>
			
			</ul>
			</section>
		
			<section>
				<ul class="smallfont" style="line-height:1.5em;">
					<li> The server api returns back the <mark>id</mark> to the client which returns the same in the payment() method</li>
		     <br/>	<li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called. </li>
		     <br/>	<li> Call <mark> paypal.request.get(GET_PAYMENT_URL+"?paymentId="+data.paymentID).</mark> in onAuthorize() to get the payment details and show the <i>confirmation</i> block with complete the payment button </li>	
				</ul>
			</section>

			<section>
				<ul class="smallfont" style="line-height:1.5em;">
					<li> On clicking complete the payment button , call  <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.paymentID and data.payerID </i> in onAuthorize() to execute the payment.</li>
				<br/><li> The server calls the payment api and execute the payment.</li>
				<br/><li> Final payment object is returned in the callback and the result can be shown to the user.</li>
				</ul>    
		   </section>
		<section>
				<img height="400" data-src="../../images/confirmation-server.gif" alt="Confirmation Server working flow">
		</section>       
	</section>    <!-- end of confirmation server -->

	<section> <!-- Mark Flow server -->
		<h3> Mark flow Server Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> This flow is longer when compared to Shortcut flow</li>
		<br/>	<li> Server App uses <i>paypal-rest-sdk node js</i> module.</li>
		<br/>	<li> Merchant selects the product and clicks on proceed to checkout button.</li>
		<br/>	<li> Merchant will be shown a shipping address form and merchant can enter them.</li> 
		<br/>	<li> User will be shown the <i>paypal checkout button and other payment options</i>.</li>
			</ul>
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
			<br/><li> Call <mark>paypal.request.post(CREATE_PAYMENT_URL)</mark>,passing the payment payload <i>(intent and payer are required fields) </i> which invokes the method on the server to create payment</li>
			<br/><li> The server api returns back the <mark>id</mark> to the client which returns the same in the payment() method</li>
			<br/><li> User will be shown the paypal login screen and once after successful auth , <mark>onAuthorize()</mark> method gets called. </li>
				
			</ul>
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> In the onAuthorize() method, call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.paymentID and data.payerID </i> </li>
		<br/>	<li> The server calls the payment api and execute the payment.</li>
		<br/>	<li> Final payment object is returned from the server and the result can be shown to the user.</li>
			</ul>
		</section>	
	
		<section>
				<img height="400" data-src="../../images/markflow-server.gif" alt="Mark Flow Server working">
		</section>       
	</section>    <!-- end of mark flow server -->


	<section> <!-- Full Page redirect Flow server -->
		<h3> Full Page redirect flow Server Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> This flow doesnot use the incontext experience</li>
		<br/>	<li> Server App uses <i>paypal-rest-sdk node js</i> module.</li>
		<br/>	<li> Merchant is shown the paypal checkout button </li>
		<br/>	<li> On clicking the paypal button, <mark>onClick()</mark> method gets invoked.</li>
		<br/>	<li> <i>Redirect the merchant to the server</i> to create the payment by using <mark> window.location = "CREATE_PAYMENT_URL"</mark></li>
			</ul>
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> The server node sdk invokes the create payment api of paypal by passing the payment payload containing <i>intent , payer and return_urls </i> &nbsp;&nbsp;
				<mark>
					redirect_urls: {
						return_url: "/api/server/return",
						cancel_url: "/api/server/cancel"
						}
				</mark>
				</li>
		<br/>	<li> The returned response contains list of <i>HATEOAS links</i> </li> 
		<br/>	<li> Redirect the merchant to the redirect HATEOAS link from the above step </li>
		<br/>	<li> User will be shown the paypal login screen </li>
			</ul>
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Once after successful auth and on clicking <i>Pay now/Continue button</i>, payment gets executed </li>
		<br/>	<li> Paypal returns payerId and token to the return url mentioned in the payload.</li>
		<br/>	<li> Use the payerId information to get the payment details and display to the user.</li>
			</ul>
		</section>	
	
		<section>
				<img height="400" data-src="../../images/fullpageredirect-server.gif" alt="Mark Flow Server working">
		</section>       
	</section>    <!-- end of full page redirect flow server -->

    <!-- end of server side integrations -->


	<!-- Brain tree introduction -->

	<section>
		<section>
			<h2>Braintree SDK</h2>
			<p>The Braintree SDKs allow you to accept payments and provide an optimal checkout experience for your customers with one simple developer integration.</p>
			<p>The client SDKs enable you to collect payment information. </p>	
			<p>The server SDKs manage all requests to PayPal.</p>
		
			<a href="#" class="navigate-down">
				<img width="100" height="100" data-src="https://s3.amazonaws.com/hakim-static/reveal-js/arrow.png" alt="Down arrow">
			</a>
		</section>
		<section>
			<h2>Working of EC BT SDKs</h2>
			<img height="400" width="100%" data-src="../../images/braintree-overview.png" alt="EC BT working">
		 </section>
		 
		 <section>
			 <h3>EC BT Steps</h3>
			<ol class="smallfont" style="line-height:1.5em;list-style-type:decimal">
				<li>Your app or web front-end requests a client token from your server in order to initialize the client SDK.</li>
				<br/><li>Your server generates and sends a client token back to your client with the server SDK.</li>
			    <br/><li>Once the client SDK is initialized and the customer has submitted payment information, the SDK communicates that information to Braintree, which returns a payment method nonce</li>
			</ol>
		 </section>

		 <section>
			<h3>EC BT Steps (contd...)</h3>
		   <ol start="4" class="smallfont" style="line-height:1.5em;list-style-type:decimal">
			   <li>You then send the payment method nonce to your server.</li>
			 <br/>   <li>Your server code receives the payment method nonce from your client and then uses the server SDK to create a transaction or perform other functions.</li>
		   </ol>
		</section>
	</section>
	<!-- end of braintree intro-->

	<!-- start of braintree integration -->

	<section>
		<h3> Braintree Integration</h3>
		<section>
			<p style="float:left;margin-left:4%"> <i>Characteristics</i></p>
			<ul>
				<li> Requires both Client and Server sdks </li>
				<li> Use this integration for advanced apps that require both web &amp; mobile support and support multiple payment options.</li>
				<li> Requires sandbox/live <i>access token</i> from the paypal dashboard </li>
			</ul>
		</section>

		<section>
			<p> EC BT client node SDK methods</p>
			<ul class="smallfont">
				<li>
					Include the JS files from braintree on the top of the page
<pre>
<code data-trim>
&lt;script src="https://js.braintreegateway.com/web/3.25.0/js/client.min.js"&gt;&lt;/script&gt;
&lt;script src="https://js.braintreegateway.com/web/3.25.0/js/paypal-checkout.min.js"&gt;&lt;/script&gt;
</code>
</pre>
				</li>
				<li>	 In the paypal button render method, pass braintree as one of the property 
<pre>
<code data-trim>
paypal.Button.render({
	braintree: braintree,
	// Other configuration
}, '#id-of-element-where-paypal-button-will-render');
</code>
</pre>
</li>
			</ul>	

		</section>


		<section>
				<p> EC BT client node SDK methods (contd...)</p>
				<ul class="smallfont">
					<li>
						Call the server to get the <i>client token</i> and assign it to the client property of the paypal button render method.
<pre>
<code data-trim>
client: { sandbox: paypal.request.get('/api/braintree/client-token') }
</code>
</pre>				
					</li>
					<li>
						Use <i>actions.payment.create()</i>to create the payment .
						Below are the params that are passed to this method with sample data:
<pre style="height:15em">
<code data-trim style="height:100% !important">
payment: {
	transactions: [
		{
			amount: { total: '1.00', currency: 'USD' }
		}
	],

	payer : {
		shipping_address: {
			recipient_name: 'XYA ABC',
			line1: '1234 Main St.',
			line2: 'Unit 1',
			city: 'Little India',
			country_code: 'SG',
			postal_code: '351234',
			state: 'Singapore',
			phone: '65 123213213'
		}
	},

	application_context: {
		brand_name: "branding",
		shipping_preference: "GET_FROM_FILE",
		landing_page: "billing"
	}

}	
</code>
</pre>							
					
					</li>

				</ul>	
	
			</section>
		


			<section>
					<p> EC BT client node SDK methods (contd...)</p>
					<ul class="smallfont">
						<li>
							After successful authentication in the paypal page , data.nonce is returned back to the client .
							Call the server sdk to execute the payment passing <i>nonce</i>.
<pre>
<code data-trim>
var EXECUTE_PAYMENT_URL = "/api/braintree/payment"	
onAuthorize: function(data, actions) {
	// Call your server with data.nonce to finalize the payment
	console.log('Braintree nonce:', data.nonce);
	return paypal.request.post(EXECUTE_PAYMENT_URL, {
		nonce: data.nonce
	}).then(function(payment) {
		if (payment.error) {
			alert(payment.error);
			return;
		}
		// display the payment result details to the user
	})
}
</code>
</pre>
						</li>
		
					</ul>	
		
				</section>			



		<section>
			<p> EC BT server node SDK methods</p>
			<ul class="smallfont">
				<li>Create the gateway object with the access token obtained from the paypal page. This is the first step to be performed <br/>
<pre>
<code data-trim>
var gateway = braintree.connect({
	accessToken: useYourAccessToken
});
</code>
</pre>
				</li>
<li>
	To Generate client token use the following code <br/>
<pre>
<code data-trim>
gateway.clientToken.generate({}, function (err, response) {
	res.send(response.clientToken);
});
</code>	
</pre>

				</li>

			</ul>
		</section>
			
		<section>
				<p> EC BT server node SDK methods (contd..)</p>
				<ul class="smallfont">
					
	<li>
		You can create a transaction using <i>nonce</i> that will be sent from the client as a post request .<br/>
		 Below are the various PayPal params you can use : 
<pre>
<code data-trim style="height:300;width:100%">
var saleRequest = {
	amount: 4.00,
	merchantAccountId: "USD",
	paymentMethodNonce: req.body.nonce,
	orderId: "Mapped to PayPal Invoice Number",
	descriptor: {
		name: "Descriptor displayed in customer CC statements. 22 char max"
	},
	options: {
		paypal: {
		customField: "PayPal custom field",
		description: "Description for PayPal email receipt"
		},
		submitForSettlement: true
	}
	};
	
	gateway.transaction.sale(saleRequest, function (err, result) {
	if (err) {
		res.send("<h1>Error:  " + err + "</h1>");
	} else if (result.success) {
		res.send("<h1>Success! Transaction ID: " + result.transaction.id + "</h1>");
	} else {
		res.send("<h1>Error:  " + result.message + "</h1>");
	}
	});
</code>	
</pre>
				</li>
				</ul>
		</section>


		<section>
				<p> EC BT server node SDK methods (contd..)</p>
				<ul class="smallfont">
					
	<li>
		You can view the details of the transaction by using the <i>transaction id</i> as follows.<br/>
<pre>
<code data-trim style="height:300px;width:100%">
var stream = gateway.transaction.search(function (search) {
	search.id().is(paymentId);
	}, function (err, response) {
	if(err){
		console.log("errr",err);
		res.send("<h1>Error:  " + err + "</h1>");
	}
	response.each(function (err, transaction) {
		res.render("result",{res:transaction})
	});
});
</code>	
</pre>
				</li>
				</ul>
		</section>


	</section> <!-- end of types of ec bt sdks -->
	
	<section>
		<h3> Some of the most common types of Braintree integration:</h3>
		<ol>
			<li> Shortcut</li>
			<li> Redirection </li>
			<li> Customise Experience </li>
			<li> Confirmation </li>
			<li> Mark Flow (Can be used with other types)</li>
		</ol>
	</section>    

	
	<section> <!-- ecbt shortcut flow -->
		<h3> Shortcut flow Braintree Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>braintree</i> node module.</li>
		<br/>	<li> User will be shown the paypal checkout button.</li>
		<br/>	<li> Make an async request to the server to get the client token and assign it to the client option<br/>
<pre>
<code data-trim>
client: {
	sandbox: paypal.request.get('/api/braintree/clienttoken')
}
</code>
</pre>
				</li>
			</ul>    
		</section>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
			<br/><li> Call <mark> actions.payment.create() </mark>passing the payment payload <i>(amount and currency are required)</i></li>
			<br/><li> User will be shown the paypal login screen .</li>
			<br/><li> Client sdk request the braintree server and <i>nonce</i> is returned and and once after successful auth,<mark>onAuthorize()</mark> method gets called.
			</ul>	
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> In the onAuthorize() method, call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.nonce </i> </li>
		<br/>	<li> In the server, create the sale request object using the nonce passed from the client and call <mark>  gateway.transaction.sale(saleRequestObj) </mark> to execute the payment</li>
		<br/>	<li> Final payment object is returned from the server and the result can be shown to the user.
			</ul>
		</section>

		<section>
				<img height="400" data-src="../../images/basic-braintree.gif" alt="Shortcut Braintree working flow">
				
		</section>       
    </section>    <!-- end of shortcut ecbt  -->



	<section> <!-- ecbt redirection flow -->
		<h3> Redirection flow Braintree Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>braintree</i> node module.</li>
			<br/><li> We can redirect the user to a different page on cancelling the checkout flow or on success execution of the payment to show the payment details.</li>
			<br/><li> User will be shown the paypal checkout button.</li>
			<br/><li> Make an async request to the server to get the client token and assign it to the client option<br/>
<pre>
<code data-trim>
client: {
	sandbox: paypal.request.get('/api/braintree/clienttoken')
}
</code>
</pre>
				</li>
			</ul>    
		</section>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
			<br/><li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
			<br/><li> Call <mark> actions.payment.create() </mark>passing the payment payload <i>(amount and currency are required)</i></li>
			<br/><li> User will be shown the paypal login screen .</li>
			<br/><li> Client sdk request the braintree server and <i>nonce</i> is returned and and once after successful auth,<mark>onAuthorize()</mark> method gets called.
			</ul>	
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
			<br/><li> In the onAuthorize() method, call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.nonce </i> </li>
			<br/><li> In the server, create the sale request object using the nonce passed from the client </li>
			<br/><li> Call <mark>  gateway.transaction.sale(saleRequestObj) </mark> to execute the payment</li>
			</ul>
		</section>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Final payment object is returned from the server and <i>redirect the merchant</i> to <mark>window.location.href=RESULT_URL+"?id="+payment.transaction.id </mark>. 
					This inturn will call the <mark>gateway.transaction.search(id)</mark> to get the payment result and show the result in a new page</li>
			<br/><li> If the user cancels the checkout flow , use <mark> window.location.href = CANCEL_URL </mark> in the <i>onCancel()</i> option to redirect the user to the cancel page</li>    
			</ul>
		</section>	

		<section>
				<img height="400" data-src="../../images/redirection-braintree.gif" alt="Redirection Flow Braintree working">
				
		</section>       
    </section>    <!-- end of redirection ecbt  -->

	

	<section> <!-- ecbt experience flow -->
		<h3> Customise Experience flow Braintree Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>braintree</i> node module.</li>
			<br/>	<li> We can customize the experience by passing extra options in <mark> actions.payment.create()</mark>.
			<br/>	<li> User will be shown the paypal checkout button.</li>
			<br/>	<li> Make an async request to the server to get the client token and assign it to the client option<br/>
<pre>
<code data-trim>
client: {
	sandbox: paypal.request.get('/api/braintree/clienttoken')
}
</code>
</pre>
				</li>
			</ul>    
		</section>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
			<br/>	<li> Call <mark> actions.payment.create() </mark>passing the payment payload <i>(amount and currency are required)</i></li>
		<br/>	<li> User will be shown the paypal login screen .</li>
			
		</ul>
		</section>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
			<br/>
			<li> For customized experience , pass in few more parameters to the payment payload
<pre style="height:20em">
<code data-trim style="height:100% !important">
payer : {
	shipping_address: {
		recipient_name: 'XYA ABC',
		line1: '1234 Main St.',
		line2: 'Unit 1',
		city: 'Little India',
		country_code: 'SG',
		postal_code: '351234',
		state: 'Singapore',
		phone: '65 123213213'
	}
},
application_context: {
	brand_name: "custom brand name", // custom brand name
	shipping_preference: "SET_PROVIDED_ADDRESS", // NO_SHIPPING , GET_FROM_FILE
	landing_page: "billing" //login
}	
</code>
</pre>
		</li>	<br/>
		<li> Client sdk request the braintree server and <i>nonce</i> is returned and and once after successful auth,<mark>onAuthorize()</mark> method gets called.</li>
		
		
			</ul>	
		</section>
		
		<section>
			<p> Application Context Options </p>
			<table class="options">
					<thead>
						<tr>
							<th>Option</th>
							<th>Possible Values</th>
							</tr>
					</thead>
					<tbody>
						<tr>
							<td>brand_name </td>
							<td> Provie Custom Brand name 
							</td>
						</tr>

						<tr>
							<td>shipping_preference </td>
							<td> <i> No_SHIPPING</i> Shipping information will not be shown <br/>
									<i> GET_FROM_FILE</i> (default) Shipping information stored in the paypal will be shown <br/>
									<i> SET_SPECIFIED_ADDRESS</i> Shipping information passed along with the payload will be shown 
							</td>
						</tr>
						<tr>
							<td>landing_page</td>
							<td> <i>billing</i> - For non-PayPal account landing page <br/>
								<i>login</i> - For PayPal account login landing page
						   </td>
						</tr>
					</tbody>
				</table>			
		</section>


		<section>
			<ul class="smallfont" style="line-height:1.5em;">
			<li> In the onAuthorize() method, call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.nonce </i> </li>
			<br/>	<li> In the server, create the sale request object using the nonce passed from the client and call <mark>  gateway.transaction.sale(saleRequestObj) </mark> to execute the payment</li>
			<br/>	<li> Final payment object is returned from the server and the result can be shown to the user.
			</ul>
		</section>

		<section>
				<img height="400" data-src="../../images/experience-braintree.gif" alt="Experience Flow Braintree working">
		</section>       
   
	</section>    <!-- end of experience ecbt  -->


	
	<section> <!-- ecbt confirmation flow -->
		<h3> Confirmation flow Braintree Integration </h3>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>braintree</i> node module.</li>
		<br/>	<li> User will be shown the paypal checkout button.</li>
		<br/>	<li> Make an async request to the server to get the client token and assign it to the client option<br/>
<pre>
<code data-trim>
client: {
	sandbox: paypal.request.get('/api/braintree/clienttoken')
}
</code>
</pre>
				</li>
				<br/>			<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
			</ul>    
		</section>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
		<br/>	<li> Call <mark> actions.payment.create() </mark>passing the payment payload <i>(amount and currency are required)</i></li>
		<br/>	<li> User will be shown the paypal login screen .</li>
		<br/>	<li> Client sdk request the braintree server and <i>nonce</i> is returned and and once after successful auth,<mark>onAuthorize()</mark> method gets called.</li>
		<br/>	<li> Call <mark> actions.payment.get()</mark> in onAuthorize() to get the payment details and show the <i>confirmation</i> block with complete the payment button </li>	
		
		</ul>	
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
			<li> On clicking complete the payment button , call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.nonce </i> </li>
			<br/>	<li> In the server, create the sale request object using the nonce passed from the client and call <mark>  gateway.transaction.sale(saleRequestObj) </mark> to execute the payment</li>
			<br/>	<li> Final payment object is returned from the server and the result can be shown to the user.</li>
			</ul>
		</section>

		<section>
				<img height="400" data-src="../../images/confirmation-braintree.gif" alt="Confirmation Flow Braintree working">
				
		</section>       
    </section>    <!-- end of confirmation ecbt  -->



	
	
	<section> <!-- ecbt mark flow -->
		<h3> Mark flow Braintree Integration </h3>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> This flow is longer when compared to Shortcut flow</li>
			<br/>	<li> Merchant selects the product and clicks on <i>proceed to checkout button.</i></li>
			<br/>	<li> Merchant will be shown a <i>shipping address form</i> and merchant can enter them.</li> 
			</ul>
		</section>
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> Server App uses <i>braintree</i> node module.</li>
			<br/><li> User will be shown the paypal checkout button.</li>
			<br/><li> Make an async request to the server to get the client token and assign it to the client option<br/>
<pre>
<code data-trim>
client: {
	sandbox: paypal.request.get('/api/braintree/clienttoken')
}
</code>
</pre>
				</li>
			</ul>    
		</section>

		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> On clicking the paypal button, <mark>payment()</mark> method gets invoked.</li>
		<br/>	<li> Call <mark> actions.payment.create() </mark>passing the payment payload <i>(amount and currency are required)</i></li>
		<br/>	<li> User will be shown the paypal login screen .</li>
		<br/>	<li> Client sdk request the braintree server and <i>nonce</i> is returned and and once after successful auth,<mark>onAuthorize()</mark> method gets called.
			</ul>	
		</section>
		
		<section>
			<ul class="smallfont" style="line-height:1.5em;">
				<li> In onAuthorize() method, call <mark>paypal.request.post(EXECUTE_PAYMENT_URL)</mark>to the server passing <i> data.nonce </i> </li>
			<br/><li> In the server, create the sale request object using the nonce passed from the client and call <mark>  gateway.transaction.sale(saleRequestObj) </mark> to execute the payment</li>
			<br/><li> Final payment object is returned from the server and the result can be shown to the user.
			</ul>
		</section>

		<section>
				<img height="400" data-src="../../images/markflow-braintree.gif" alt="Mark Flow Braintree working">
				
		</section>       
    </section>    <!-- end of markflow ecbt  -->

	<!-- end of braintree integration -->


				<section style="text-align: left;">
					<h1>THE END</h1>
					<p>
						- <a href="https://developer.paypal.com/docs/integration/direct/express-checkout/integration-jsv4/">Paypal Developer Portal </a> <br>
						- <a href="/">Demo Portal</a>
					</p>
					
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				//autoSlide:4000,


				// Parallax background image
			parallaxBackgroundImage: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxASEA8PEg8PFRAPEA8PDw8QDw8PDw8PFRUWFhUVFRUYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKDQ0NDg0NDysZFRkrKysrKysrKystKzcrKy0rKys3KysrNysrKysrKy0rKysrNysrKystKysrKysrKysrK//AABEIALEBHAMBIgACEQEDEQH/xAAaAAADAQEBAQAAAAAAAAAAAAAAAQIDBAUH/8QALRABAQACAAUDAwQBBQEAAAAAAAECEQMSITFRQWFxE4GRBKGx0cFCUuHw8RT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAMAwEAAhEDEQA/APnuOC9a9TnwdaZRze4mR8sLkgK5lYZI0eOga7o+p7UYFlzemlGXFyl8sJwdtcrJ1uU+O44fGxv/ACgyvAvsn6d8O7Gy9qq4qPO5Ryu/6csm51KcGeP3ByY8K108PgT1Xjw9f+tAKQwz4lvpAWnLiYz1jDK5drf4Z/TEdH/0Y+/4Tf1XiX7svp3wPp+wOrh5W95r7qc2FsafVv8AtBdhcqLxvb9z+t7UDqNrmcvpRLBUyU+W+WmitBndn7r6+wAodg2NAjJnW1kTNICfKuVxzO/PzNujh782fF3/ACDTkg5Iyztu5udL6zSZhnO2W/vKo35Im8O+hXLPXSY1OPGv+2fagqY5T1YX9XltvxOLNXd193DeJvtPyBZ229fUoNb3RiC8K6eFnle1Z8PTpwuu0QXOb2WWOW/RShCwAE6p7AA9lsUtANFymdBnymXF4nKzx/UeZ09Aa/Y5CuU8+/2c+XHu+nbwDq5SuUjDD9R339tFxuLL0n5Btlxp6ljxJbr9nLlfzWf8g9DKyepW+Xn5Zb+7Th8Wzpv8g6+crkw4fEvXtf7Rz99/kG94kTz+7C5jfyDry1Otc2fHt7dJ59WMz826+exzOdu/xNgvHj5efz1dU/UTW+2u811+zjmNvt89aM8dddT572/YHXh+rlnbV9J5c/H4ts1qTz5c+N69bf8AKs8/2896IWM9DxHD4l3/AJ9W8xknXXXvQRzdKzlPHh9/E8epUDldPC/UWTXT2cxivQ4PG33a80cfCXjkDouUPbHZTPQNuYcyNkDWUMpkewapzy1EfURuaBnkWOG16VJoE2dKxsbZI0CJjtWtX7KxxvVGU9ALiX+GdjS4psBM9SkPS8cd78gmZXTO46+WmWH7IuxBP8n9TXT+k+6ARpUqTUOWnzJIDOJOAemkzQrEF23pq9uxTXr/AENC1FP6dPCFi0wBrgeBQsag1gyhbVKCJdNJUVOwa6K0Y5bNRFJdKoFKAVUFFGyQVKWpvadjah8Tqy0q0qCcp7ljVIoK5iuMvskAviYdIzmE8i1OhGBkFUwRiAwYAyEBVog0AVGmFZxeNQbRMpSlsVrtWOTOUbBraiiUqge1zNlaW1HRsts5krYHakbKgNjZFQPZbSQK2VLZWgNlsrlEXOAukjnLmBdo2zuad0CACgMjEM4lQL5S1E7ANblGeWWy2AVFyoioDSUtlskGkp7RKexV45GzVKB0gVAbVjkgtiNtjbOZK2KdIgASdIAyvEaVjloDuXVG+wTQO05UgD2NlTAgAoDhHBDBADBGAMjA4qJhgstkEFSntMMDOVI2DTZFKAFIUgMSkAXsbTsrnBV7RlnpFyt+BjgCblaciv4GXYEWd08qoASVWWgToaPRAAAoAAIewAAOAAfLSCuYCODY2BgFUD2e0wwVsJALlOs9qlAwCAC0kZdQO5eByetohUU+aDmTjiv10CuXaMr1VazyA7D2ndEoC0J0APY0QAj2QAwQBRAKhgtmCpBChoDRkYAj2JAEEqpg0nC9ikZ7DfHg9PTfp1TMPOvylWMtK5WuWEPHXj7lIj6fRGWWhxOLbdIAramxZZWKC5FP4LSsYAt7FkNdRkAlGUKAEg6UA9EZAAQADQPQEDEgAaFADQGgB6pyUlAJieii5haBSRUkVMZP7TlxEGknu0xs8xxXKiEK7dz3/GocuPdyXL3VjxL7EWum5zxGXG4+5qIzvT0/tlTMKJ5/A9znvdePJZe37qg2Wi3RsFaXhPVjtrj2Atpyp2DlBGzg5SgHRIIdoFSAAgAChoQWgCoAAbIQD2IDlBRSlsbA+ZvwN9/T3c+Na3iamjR02T/t0xvAnx99srnfNG8vdJq1d4cn+pN17kLVRfPNdkVO1YzzegAs/ksvkgAAgDQPQgCRSbS2CrStK0tgv0TlBKAKKqTgJMWCgACBXoQACAACMACUQBV7JAARV7gAvEzABGff7AAmHOwAIVCAKqAAXf8AJeAASAABGAI4AAOAAL6ppgCMAH//2Q==',
	
		// Parallax background size
		parallaxBackgroundSize: '900px', // CSS syntax, e.g. "2100px 900px" - currently only pixels are supported (don't use % or auto)
	


				transition: 'page', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/search/search.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
	
	function loadHeader() {
	/*	var header = $('#header').html();
		if ( window.location.search.match( /print-pdf/gi ) ) {
			Reveal.addEventListener( 'ready', function( event ) {
				$('.slide-background').append(header);
			});
		}
		else {
			$('div.reveal').append(header);
		}
		*/
	}
	loadHeader();	

	Reveal.addEventListener( 'overviewshown', function( event ) { /* ... */  loadHeader();} );
	Reveal.addEventListener( 'overviewhidden', function( event ) { /* ... */ loadHeader();} );

		</script>

	</body>
</html>
